{"ast":null,"code":"import{useQuery}from\"react-query\";import{fetchCoinHistory}from\"../api\";import ApexChart from\"react-apexcharts\";import{jsx as _jsx}from\"react/jsx-runtime\";function Chart(_ref){var _data$map,_data$map2;var coinId=_ref.coinId;var _useQuery=useQuery([\"ohlcv\",coinId],function(){return fetchCoinHistory(coinId);},{refetchInterval:10000}),isLoading=_useQuery.isLoading,data=_useQuery.data;return/*#__PURE__*/_jsx(\"div\",{children:isLoading?\"Loading chart...\":/*#__PURE__*/_jsx(ApexChart,{type:\"line\",series:[{name:\"Price\",data:(_data$map=data===null||data===void 0?void 0:data.map(function(price){return parseFloat(price.close);}))!==null&&_data$map!==void 0?_data$map:[]}],options:{theme:{mode:\"dark\"},chart:{height:300,width:500,toolbar:{show:false},background:\"transparent\"},grid:{show:false},stroke:{curve:\"smooth\",width:4},yaxis:{show:false},xaxis:{axisBorder:{show:false},axisTicks:{show:false},labels:{show:false,datetimeFormatter:{month:\"mmm 'yy\"}},type:\"datetime\",categories:(_data$map2=data===null||data===void 0?void 0:data.map(function(price){return price.time_close*1000;}))!==null&&_data$map2!==void 0?_data$map2:[]},fill:{type:\"gradient\",gradient:{gradientToColors:[\"#0be881\"],stops:[0,100]}},colors:[\"#0fbcf9\"],tooltip:{y:{formatter:function formatter(value){return\"$\".concat(value.toFixed(3));}}}}})});}export default Chart;","map":{"version":3,"names":["useQuery","fetchCoinHistory","ApexChart","Chart","coinId","refetchInterval","isLoading","data","name","map","price","parseFloat","close","theme","mode","chart","height","width","toolbar","show","background","grid","stroke","curve","yaxis","xaxis","axisBorder","axisTicks","labels","datetimeFormatter","month","type","categories","time_close","fill","gradient","gradientToColors","stops","colors","tooltip","y","formatter","value","toFixed"],"sources":["/Users/DSM20221/jikwan/github/TIL/memo/react-masterclass/src/routes/Chart.tsx"],"sourcesContent":["import { useQuery } from \"react-query\";\nimport { fetchCoinHistory } from \"../api\";\nimport ApexChart from \"react-apexcharts\";\n\ninterface ChartProps {\n  coinId: string;\n}\n\ninterface IHistorical {\n  time_open: number;\n  time_close: number;\n  open: string;\n  high: string;\n  low: string;\n  close: string;\n  volume: string;\n  market_cap: number;\n}\n\nfunction Chart({ coinId }: ChartProps) {\n  const { isLoading, data } = useQuery<IHistorical[]>([\"ohlcv\", coinId], () => fetchCoinHistory(coinId), {\n    refetchInterval: 10000,\n  });\n  return (\n    <div>\n      {isLoading ? (\n        \"Loading chart...\"\n      ) : (\n        <ApexChart\n          type=\"line\"\n          series={[\n            {\n              name: \"Price\",\n              data: data?.map((price) => parseFloat(price.close)) ?? [],\n            },\n          ]}\n          options={{\n            theme: {\n              mode: \"dark\",\n            },\n            chart: {\n              height: 300,\n              width: 500,\n              toolbar: {\n                show: false,\n              },\n              background: \"transparent\",\n            },\n            grid: { show: false },\n            stroke: {\n              curve: \"smooth\",\n              width: 4,\n            },\n            yaxis: {\n              show: false,\n            },\n            xaxis: {\n              axisBorder: {\n                show: false,\n              },\n              axisTicks: {\n                show: false,\n              },\n              labels: { show: false, datetimeFormatter: { month: \"mmm 'yy\" } },\n              type: \"datetime\",\n              categories: data?.map((price) => price.time_close * 1000) ?? [],\n            },\n            fill: {\n              type: \"gradient\",\n              gradient: { gradientToColors: [\"#0be881\"], stops: [0, 100] },\n            },\n            colors: [\"#0fbcf9\"],\n            tooltip: {\n              y: {\n                formatter: (value) => `$${value.toFixed(3)}`,\n              },\n            },\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Chart;\n"],"mappings":"AAAA,OAASA,QAAT,KAAyB,aAAzB,CACA,OAASC,gBAAT,KAAiC,QAAjC,CACA,MAAOC,UAAP,KAAsB,kBAAtB,C,2CAiBA,QAASC,MAAT,MAAuC,6BAAtBC,OAAsB,MAAtBA,MAAsB,CACrC,cAA4BJ,QAAQ,CAAgB,CAAC,OAAD,CAAUI,MAAV,CAAhB,CAAmC,iBAAMH,iBAAgB,CAACG,MAAD,CAAtB,EAAnC,CAAmE,CACrGC,eAAe,CAAE,KADoF,CAAnE,CAApC,CAAQC,SAAR,WAAQA,SAAR,CAAmBC,IAAnB,WAAmBA,IAAnB,CAGA,mBACE,qBACGD,SAAS,CACR,kBADQ,cAGR,KAAC,SAAD,EACE,IAAI,CAAC,MADP,CAEE,MAAM,CAAE,CACN,CACEE,IAAI,CAAE,OADR,CAEED,IAAI,YAAEA,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEE,GAAN,CAAU,SAACC,KAAD,QAAWC,WAAU,CAACD,KAAK,CAACE,KAAP,CAArB,EAAV,CAAF,uCAAmD,EAFzD,CADM,CAFV,CAQE,OAAO,CAAE,CACPC,KAAK,CAAE,CACLC,IAAI,CAAE,MADD,CADA,CAIPC,KAAK,CAAE,CACLC,MAAM,CAAE,GADH,CAELC,KAAK,CAAE,GAFF,CAGLC,OAAO,CAAE,CACPC,IAAI,CAAE,KADC,CAHJ,CAMLC,UAAU,CAAE,aANP,CAJA,CAYPC,IAAI,CAAE,CAAEF,IAAI,CAAE,KAAR,CAZC,CAaPG,MAAM,CAAE,CACNC,KAAK,CAAE,QADD,CAENN,KAAK,CAAE,CAFD,CAbD,CAiBPO,KAAK,CAAE,CACLL,IAAI,CAAE,KADD,CAjBA,CAoBPM,KAAK,CAAE,CACLC,UAAU,CAAE,CACVP,IAAI,CAAE,KADI,CADP,CAILQ,SAAS,CAAE,CACTR,IAAI,CAAE,KADG,CAJN,CAOLS,MAAM,CAAE,CAAET,IAAI,CAAE,KAAR,CAAeU,iBAAiB,CAAE,CAAEC,KAAK,CAAE,SAAT,CAAlC,CAPH,CAQLC,IAAI,CAAE,UARD,CASLC,UAAU,aAAEzB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEE,GAAN,CAAU,SAACC,KAAD,QAAWA,MAAK,CAACuB,UAAN,CAAmB,IAA9B,EAAV,CAAF,yCAAmD,EATxD,CApBA,CA+BPC,IAAI,CAAE,CACJH,IAAI,CAAE,UADF,CAEJI,QAAQ,CAAE,CAAEC,gBAAgB,CAAE,CAAC,SAAD,CAApB,CAAiCC,KAAK,CAAE,CAAC,CAAD,CAAI,GAAJ,CAAxC,CAFN,CA/BC,CAmCPC,MAAM,CAAE,CAAC,SAAD,CAnCD,CAoCPC,OAAO,CAAE,CACPC,CAAC,CAAE,CACDC,SAAS,CAAE,mBAACC,KAAD,mBAAeA,KAAK,CAACC,OAAN,CAAc,CAAd,CAAf,GADV,CADI,CApCF,CARX,EAJJ,EADF,CA2DD,CAED,cAAexC,MAAf"},"metadata":{},"sourceType":"module"}